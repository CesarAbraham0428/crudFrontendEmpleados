
<div class="main-container">
<p-card header="Registrar Nuevo Empleado" subheader="Subtítulo" >
    <p-fieldset legend="Información Personal">   
    
     
    <p-floatlabel  variant="on">
      <input type="text" pInputText  id="nombre" [(ngModel)]="nuevoEmpleado.Nombre" name="nombre" required autocomplete="off"/>
      <label for="nombre">Nombre</label>
  </p-floatlabel> 

  <div class="label-container">
    <p-floatlabel variant="on">
      <input type="text" pInputText id="ApP" [(ngModel)]="nuevoEmpleado.ApP" name="apP" required autocomplete="off"  />
      <label for="ApP">Apellido Paterno</label>
  </p-floatlabel>
</div>


<div class="label-container">
    <p-floatlabel variant="on">
      <input type="text" pInputText id="apM" [(ngModel)]="nuevoEmpleado.ApM" name="apM" required autocomplete="off" />
      <label for="apM">Apellido Materno</label>
  </p-floatlabel>
</div>

<div class="label-container">
   <p-floatlabel variant="on">
    <p-datepicker inputId="FechaNacimiento" [(ngModel)]="nuevoEmpleado.FechaNacimiento" showIcon iconDisplay="input" />
    <label for="FechaNacimiento">Fecha Nacimiento</label>
</p-floatlabel>
</div>
  
<div class="label-container">
  <p-floatlabel variant="on">
    <input pInputText id="RFC" [(ngModel)]="nuevoEmpleado.RFC" 
           (input)="formatearRFC()"  (blur)="rfcInvalido = !validarRFC()"  autocomplete="off"  maxlength="11"
            />
    <label for="RFC">RFC</label>
  </p-floatlabel>
  <small *ngIf="rfcInvalido" class="error-text">RFC inválido. Debe ser "XXXX-######".</small>
</div>

<div class="label-container">
  <p-floatlabel variant="on">
<p-autocomplete [(ngModel)]="nuevoEmpleado.Puesto" [virtualScroll]="true" [suggestions]="filteredItemsPuesto" [virtualScrollItemSize]="34" (completeMethod)="filterItemsPuesto($event)" filter="true" optionLabel="label" [dropdown]="true" />
<label for="Puesto">Puesto</label>
</p-floatlabel>
</div>


<div class="label-container">
<p-floatlabel variant="on" >  
<p-autocomplete [(ngModel)]="nuevoEmpleado.Departamento" [virtualScroll]="true" [suggestions]="filteredItemsDepartamento" [virtualScrollItemSize]="34" (completeMethod)="filterItemsDepartamento($event)" optionLabel="label" [dropdown]="true" />
<label for="Departamento">Departamento</label>
</p-floatlabel>
</div>
 <!-- Teléfonos -->
 <div class="label-container">
  
  <button pButton label="+" (click)="agregarTelefonoU()" icon="pi pi-plus" class="p-button-text"></button>
 
  <div *ngFor="let telefono of nuevoEmpleado.Telefono; let j = index; trackBy: trackByFn " class="telefono-item">
    <p-floatlabel variant="on" class="telefono-container">
      <p-inputmask  mask="(999) 999-9999" type = "num" [(ngModel)]="nuevoEmpleado.Telefono[j]"/>
      <label for="">Teléfono</label>
    <button pButton *ngIf="nuevoEmpleado.Telefono.length > 1" (click)="eliminarTelefonoU(j)" icon="pi pi-trash" class="p-button-danger p-button-text eliminar-btn" aria-label="Eliminar telefono"></button>
  </p-floatlabel>
  </div>
</div>


<!-- Correos -->
<div class="label-container">
  <button pButton label="+" (click)="agregarCorreoU()" icon="pi pi-plus" class="p-button-text"></button>

<div *ngFor="let correo of nuevoEmpleado.CorreoElectronico; let k = index; trackBy: trackByFn" class="correo-item">
  <p-floatlabel variant="on" class="correo-container">
    <input type="email" pInputText [(ngModel)]="nuevoEmpleado.CorreoElectronico[k]"  />
    <label for="">Correo Electrónico</label>
    <button pButton *ngIf="nuevoEmpleado.CorreoElectronico.length > 1" (click)="eliminarCorreo(k)" icon="pi pi-trash" class="p-button-danger p-button-text eliminar-btn" aria-label="Eliminar correo"></button>
  </p-floatlabel>
</div>
</div>

<div class="label-container">
  <p-floatlabel variant="on">
<p-autocomplete [(ngModel)]="nuevoEmpleado.Sexo" [virtualScroll]="true" [suggestions]="filteredItemsSexo" [virtualScrollItemSize]="34" (completeMethod)="filterItemssSexo($event)" filter="true" optionLabel="label"  [dropdown]="true" />
<label for="on_label">Sexo</label>
</p-floatlabel>
</div>

<div class="label-container">
  <p-floatlabel variant="on">
<p-autocomplete [(ngModel)]="nuevoEmpleado.Rol" [virtualScroll]="true" [suggestions]="filteredItemsRol" [virtualScrollItemSize]="34" (completeMethod)="filterItemssRol($event)" filter="true" optionLabel="label"  [dropdown]="true" />
<label for="on_label">Rol</label>
</p-floatlabel>
</div>


<div class="label-container">
  <p-floatlabel variant="on">
    <p-password id="password" [toggleMask]="true" [(ngModel)]="nuevoEmpleado.Password" />
    <label for="password">Contraseña</label>
  </p-floatlabel>
</div>

<div class="label-container">
<p-fieldset legend="Fotografía del Empleado">
  <p-fileupload name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php"
    (onUpload)="onUpload($event)" [multiple]="true" accept="image/*" maxFileSize="1000000"
    mode="advanced">
    <ng-template #empty>
      <div>Arrastra y suelta archivos aquí para subirlos.</div>
    </ng-template>
    <ng-template #content>
      <ul *ngIf="uploadedFiles.length">
        <li *ngFor="let file of uploadedFiles">{{ file.name }} - {{ file.size }} bytes</li>
      </ul>
    </ng-template>
  </p-fileupload>
    </p-fieldset>
</div>




    <p-fieldset legend="Domicilio">   
      
      <div class="label-container">
    <p-floatlabel>  
  <p-autocomplete [(ngModel)]="nuevoEmpleado.Domicilio.Ciudad" [virtualScroll]="true" [suggestions]="filteredItemsCiudad" [virtualScrollItemSize]="34" (completeMethod)="filterItemsCiudad($event)" optionLabel="label" placeholder="Ciudad" [dropdown]="true" />
  </p-floatlabel>
  </div>
  
  <div class="label-container">
  <p-floatlabel>  
    <p-autocomplete [(ngModel)]="nuevoEmpleado.Domicilio.CodigoPostal" [virtualScroll]="true" [suggestions]="filteredItemsCiudad" [virtualScrollItemSize]="34" (completeMethod)="filterItemsCiudad($event)" optionLabel="label" placeholder="Código Postal" [dropdown]="true" />
    </p-floatlabel>
  </div>
       
  <div class="label-container">
  <p-floatlabel variant="on">
      <input pInputText  id="on_label" [(ngModel)]="nuevoEmpleado.Domicilio.Calle"  autocomplete="off" apppKeyFilter="alpha" />
      <label for="on_label">Calle</label>
  </p-floatlabel>
</div>

<div class="label-container">
  <p-floatlabel variant="on">
    <input pInputText id="on_label" [(ngModel)]="nuevoEmpleado.Domicilio.Colonia" autocomplete="off" apppKeyFilter="alpha" />
    <label for="on_label">Colonia</label>
</p-floatlabel>
</div>

<div class="label-container">
<p-floatlabel variant="on">
  <input pInputText id="on_label"  [(ngModel)]="nuevoEmpleado.Domicilio.NumeroExterior" autocomplete="off" apppKeyFilter="num" />
<label for="on_label">No.Ext</label>
</p-floatlabel>
</div>
<div class="label-container">
<p-floatlabel variant="on">
  <input pInputText id="on_label" [(ngModel)]="nuevoEmpleado.Domicilio.NumeroInterior" autocomplete="off" apppKeyFilter="num" />
<label for="on_label">No.Int</label>
</p-floatlabel>
</div>
</p-fieldset>

<h3> <p-divider align="left" type="solid">
  <b>Información Familiar</b>
  </p-divider></h3>
  <h3>Familiares</h3>

 
  <button pButton label="Agregar Familiar" (click)="nuevaReferenciaFamiliar()" icon="pi pi-plus"></button>
  <p-table [value]="nuevoEmpleado.ReferenciaFamiliar" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>Nombre</th>
        <th>Parentesco</th>
        <th>Teléfonos</th>
        <th>Correos</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
  
    <ng-template pTemplate="body" let-referencia let-i="rowIndex">
      <tr>
        <td>
          <input pInputText [(ngModel)]="referencia.NombreFamiliar" placeholder="Nombre del familiar" />
        </td>
  
        <td>
          <p-auto-complete [(ngModel)]="referencia.Parentesco" [suggestions]="filteredItemsParentesco" 
            (completeMethod)="filterItemsParentesco($event)" optionLabel="label" placeholder="Parentesco" [dropdown]="true" />
        </td>
  
        <td>
          <div *ngFor="let telefono of referencia.Telefono; let j = index">
            <p-inputmask  mask="(999) 999-9999" type = "num" [(ngModel)]="referencia.Telefono[j]"  placeholder="Teléfono" />
            <button *ngIf="referencia.Telefono.length > 1" pButton label="Eliminar" (click)="eliminarTelefono(referencia, j)" icon="pi pi-minus" class="p-button-text"></button>
          </div>
          <button pButton label="+" (click)="agregarTelefono(referencia)" icon="pi pi-plus" class="p-button-text"></button>
        </td>
  
        <td>
          <input  type="email" pInputText [(ngModel)]="referencia.CorreoElectronico" placeholder="Correo Eléctronico"  />
        </td>
  
        <td>
          <button pButton (click)="eliminarReferencia(i)" icon="pi pi-trash" class="p-button-danger"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  
 
  <div class="contenedor-botones">
    <button class="boton" pButton pRipple aria-label="Buscar" severity="info" (click)="registrarEmpleado()">
      <span pButtonLabel>Guardar</span>
    </button>
  </div>
  
  